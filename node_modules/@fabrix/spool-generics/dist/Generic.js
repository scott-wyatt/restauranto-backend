"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const events_1 = require("events");
const common_1 = require("@fabrix/fabrix/dist/common");
class Generic extends common_1.FabrixGeneric {
    constructor(app, config) {
        super(app);
        if (!(app instanceof events_1.EventEmitter)) {
            throw new Error('The "app" argument must be of type EventEmitter');
        }
        this._config = config;
        this.app.emit(`generic:${this.id}:constructed`, this);
    }
    get __() {
        if (this.app.__) {
            return this.app.__;
        }
        else {
            throw new Error('Missing spool-i18n, make sure it is included in app.main.spools');
        }
    }
    get log() {
        return this.app.log;
    }
    get config() {
        return this._config;
    }
    set config(config) {
        this._config = config;
    }
    get id() {
        return this.constructor.name.replace(/(\w+)Generic/, '$1').toLowerCase();
    }
    get name() {
        return this.constructor.name;
    }
}
exports.Generic = Generic;
