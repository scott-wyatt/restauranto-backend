"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const Generic_1 = require("./common/Generic");
class LoggerProxy extends Generic_1.FabrixGeneric {
    constructor(app) {
        super(app);
        this.app.on('fabrix:log', (level, msg = []) => (console[level] || console.log)(level, ...msg));
        return new Proxy(this.emitLogEvent.bind(this), {
            get(target, key) {
                return target(key);
            },
            apply(target, thisArg, argumentsList) {
                const [level, ...msg] = argumentsList;
                return target(level)(...msg);
            }
        });
    }
    emitLogEvent(level) {
        return (...msg) => this.app.emit('fabrix:log', level, msg);
    }
}
exports.LoggerProxy = LoggerProxy;
